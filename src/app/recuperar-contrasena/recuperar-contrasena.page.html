<ion-header>
  <ion-toolbar>
    <ion-title>Recuperar Contraseña</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="background-image">
  <form #recuperarForm="ngForm" (ngSubmit)="recuperarContrasena(recuperarForm)">
    <ion-list>
      <ion-item>
        <ion-label position="floating">Correo electrónico</ion-label>
        <ion-input type="email" name="correo" ngModel required></ion-input>
      </ion-item>
      <ion-item>
        <ion-button (click)="verificarCorreo(recuperarForm.value.correo)">Verificar Correo</ion-button>
      </ion-item>
      <ion-item *ngIf="correoValido">
        <ion-label position="floating">Nueva contraseña</ion-label>
        <ion-input type="password" name="nuevaContrasena" ngModel required [disabled]="!correoValido"></ion-input>
      </ion-item>
      <ion-item *ngIf="correoValido">
        <ion-label position="floating">Confirmar contraseña</ion-label>
        <ion-input type="password" name="confirmarContrasena" ngModel required [disabled]="!correoValido"></ion-input>
      </ion-item>
    </ion-list>
    <div class="ion-padding">
      <ion-button type="submit" [disabled]="!recuperarForm.valid || !correoValido" expand="block">Cambiar Contraseña</ion-button>
    </div>
    <div *ngIf="correoNoEncontrado" class="correo-no-encontrado">
      El correo electrónico no se encuentra registrado.
    </div>
  </form>
</ion-content>